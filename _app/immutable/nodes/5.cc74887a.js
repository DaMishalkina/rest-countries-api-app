import{H as $e}from"../chunks/control.f5b05b5f.js";import{s as pe,C as Ce,f as w,a as D,l as M,g as E,h as $,c as N,m as P,d as b,j as v,J as te,i as T,v as p,F as ze,G as Le,H as De,n as W,I as le,r as ne,u as se,y as Ne,E as Oe}from"../chunks/scheduler.26305d68.js";import{S as ge,i as ve,a as U,t as R,b as de,d as ye,m as be,c as ke,e as je,g as we}from"../chunks/index.788f041a.js";import{e as G,u as Y,a as re,o as Ie,r as ae,d as oe}from"../chunks/replaceSpaceWithDash.2e45b528.js";import{b as Z}from"../chunks/paths.1b5319b5.js";function Se(o,t){return new $e(o,t)}new TextEncoder;const Me=async({fetch:o,params:t})=>{let l=null,r=null;try{const a=async()=>{const s=await o("https://raw.githubusercontent.com/DaMishalkina/rest-countries-api-app/main/static/data/data.json");if(!s.ok){const n=await o(`https://restcountries.com/v3.1/alpha/${t.slug}?fields=name,flags,population,region,subregion,capital,tld,currencies,languages,borders,cca3`);if(!n.ok)throw Se(404,{message:"Not found"});return l=await n.json(),r=l.borders,{country:l,borders:r}}return l=(await s.json()).find(n=>n.alpha3Code.toLowerCase()===t.slug),r=l.borders,{country:l,...r&&{borders:r}}},e=async()=>{try{const s=await a().then(({borders:n})=>n),u=s==null?void 0:s.map(async n=>{const h=await o("https://raw.githubusercontent.com/DaMishalkina/rest-countries-api-app/main/static/data/data.json");if(!h.ok){const f=await o(`https://restcountries.com/v3.1/alpha/${n}?fields=name,cca3`);return f.ok?f.json():(console.error(`Failed to fetch data for border: ${n}`),{name:"Fallback Border Name"})}return(await h.json()).find(f=>f.alpha3Code===n)});return await Promise.all(u)}catch(s){return console.error("Fetch Border Data Error:",s),[]}};return{country:a().then(({country:s})=>s),...await a().then(({borders:s})=>s)&&{borders:e()}}}catch(a){return console.error(a),{error:"Unable to fetch country data"}}},Re=Object.freeze(Object.defineProperty({__proto__:null,load:Me},Symbol.toStringTag,{value:"Module"}));function Pe(o){let t,l,r,a;const e=o[4].default,s=Ce(e,o,o[3],null);return{c(){t=w("a"),s&&s.c(),l=D(),r=M(o[1]),this.h()},l(u){t=E(u,"A",{href:!0,class:!0});var n=$(t);s&&s.l(n),l=N(n),r=P(n,o[1]),n.forEach(b),this.h()},h(){v(t,"href",o[0]),v(t,"class","action svelte-2y0e1a"),te(t,"action--large",o[2])},m(u,n){T(u,t,n),s&&s.m(t,null),p(t,l),p(t,r),a=!0},p(u,[n]){s&&s.p&&(!a||n&8)&&ze(s,e,u,u[3],a?De(e,u[3],n,null):Le(u[3]),null),(!a||n&2)&&W(r,u[1]),(!a||n&1)&&v(t,"href",u[0]),(!a||n&4)&&te(t,"action--large",u[2])},i(u){a||(U(s,u),a=!0)},o(u){R(s,u),a=!1},d(u){u&&b(t),s&&s.d(u)}}}function Ae(o,t,l){let{$$slots:r={},$$scope:a}=t,{link:e="",title:s="",isLarge:u=!1}=t;return o.$$set=n=>{"link"in n&&l(0,e=n.link),"title"in n&&l(1,s=n.title),"isLarge"in n&&l(2,u=n.isLarge),"$$scope"in n&&l(3,a=n.$$scope)},[e,s,u,a,r]}class Ee extends ge{constructor(t){super(),ve(this,t,Ae,Pe,pe,{link:0,title:1,isLarge:2})}}function ie(o,t,l){const r=o.slice();return r[3]=t[l],r}function ce(o,t,l){const r=o.slice();return r[6]=t[l][0],r[7]=t[l][1],r}function ue(o,t,l){const r=o.slice();return r[6]=t[l][0],r[7]=t[l][1],r}function Fe(o){let t,l;return{c(){t=ne("svg"),l=ne("path"),this.h()},l(r){t=se(r,"svg",{width:!0,height:!0,xmlns:!0,"fill-rule":!0,"clip-rule":!0,fill:!0});var a=$(t);l=se(a,"path",{d:!0}),$(l).forEach(b),a.forEach(b),this.h()},h(){v(l,"d","M2.117 12l7.527 6.235-.644.765-9-7.521 9-7.479.645.764-7.529 6.236h21.884v1h-21.883z"),v(t,"width","22"),v(t,"height","22"),v(t,"xmlns","http://www.w3.org/2000/svg"),v(t,"fill-rule","evenodd"),v(t,"clip-rule","evenodd"),v(t,"fill","currentColor")},m(r,a){T(r,t,a),p(t,l)},p:Ne,d(r){r&&b(t)}}}function fe(o,t){let l,r,a=t[6]+"",e,s,u,n,h=t[7]+"",d,f;return{key:o,first:null,c(){l=w("li"),r=w("span"),e=M(a),s=M(":"),u=D(),n=w("span"),d=M(h),f=D(),this.h()},l(i){l=E(i,"LI",{class:!0});var _=$(l);r=E(_,"SPAN",{class:!0});var y=$(r);e=P(y,a),s=P(y,":"),y.forEach(b),u=N(_),n=E(_,"SPAN",{});var C=$(n);d=P(C,h),C.forEach(b),f=N(_),_.forEach(b),this.h()},h(){v(r,"class","country-detail__field-name svelte-d7hjpz"),v(l,"class","country-detail country-details__item"),this.first=l},m(i,_){T(i,l,_),p(l,r),p(r,e),p(r,s),p(l,u),p(l,n),p(n,d),p(l,f)},p(i,_){t=i,_&4&&a!==(a=t[6]+"")&&W(e,a),_&4&&h!==(h=t[7]+"")&&W(d,h)},d(i){i&&b(l)}}}function he(o,t){let l,r,a=t[6]+"",e,s,u,n,h=t[7]+"",d,f;return{key:o,first:null,c(){l=w("li"),r=w("span"),e=M(a),s=M(":"),u=D(),n=w("span"),d=M(h),f=D(),this.h()},l(i){l=E(i,"LI",{class:!0});var _=$(l);r=E(_,"SPAN",{class:!0});var y=$(r);e=P(y,a),s=P(y,":"),y.forEach(b),u=N(_),n=E(_,"SPAN",{});var C=$(n);d=P(C,h),C.forEach(b),f=N(_),_.forEach(b),this.h()},h(){v(r,"class","country-detail__field-name svelte-d7hjpz"),v(l,"class","country-detail country-details__item"),this.first=l},m(i,_){T(i,l,_),p(l,r),p(r,e),p(r,s),p(l,u),p(l,n),p(n,d),p(l,f)},p(i,_){t=i,_&4&&a!==(a=t[6]+"")&&W(e,a),_&4&&h!==(h=t[7]+"")&&W(d,h)},d(i){i&&b(l)}}}function _e(o){let t,l,r="Border Countries:",a,e,s=[],u=new Map,n,h=G(o[1]);const d=f=>f[3].cca3;for(let f=0;f<h.length;f+=1){let i=ie(o,h,f),_=d(i);u.set(_,s[f]=me(_,i))}return{c(){t=w("div"),l=w("p"),l.textContent=r,a=D(),e=w("ul");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=E(f,"DIV",{class:!0});var i=$(t);l=E(i,"P",{class:!0,"data-svelte-h":!0}),Oe(l)!=="svelte-1n7thn8"&&(l.textContent=r),a=N(i),e=E(i,"UL",{class:!0});var _=$(e);for(let y=0;y<s.length;y+=1)s[y].l(_);_.forEach(b),i.forEach(b),this.h()},h(){v(l,"class","borders-container__title svelte-d7hjpz"),v(e,"class","borders-container__list svelte-d7hjpz"),v(t,"class","borders-container country-data__borders-container svelte-d7hjpz")},m(f,i){T(f,t,i),p(t,l),p(t,a),p(t,e);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(e,null);n=!0},p(f,i){i&2&&(h=G(f[1]),we(),s=Y(s,i,d,1,f,h,u,e,Ie,me,null,ie),ke())},i(f){if(!n){for(let i=0;i<h.length;i+=1)U(s[i]);n=!0}},o(f){for(let i=0;i<s.length;i+=1)R(s[i]);n=!1},d(f){f&&b(t);for(let i=0;i<s.length;i+=1)s[i].d()}}}function me(o,t){var s,u;let l,r,a,e;return r=new Ee({props:{link:Z+`/${ae((s=t[3])==null?void 0:s.cca3)}`,title:(u=t[3])==null?void 0:u.name}}),{key:o,first:null,c(){l=w("li"),de(r.$$.fragment),a=D(),this.h()},l(n){l=E(n,"LI",{});var h=$(l);ye(r.$$.fragment,h),a=N(h),h.forEach(b),this.h()},h(){this.first=l},m(n,h){T(n,l,h),be(r,l,null),p(l,a),e=!0},p(n,h){var f,i;t=n;const d={};h&2&&(d.link=Z+`/${ae((f=t[3])==null?void 0:f.cca3)}`),h&2&&(d.title=(i=t[3])==null?void 0:i.name),r.$set(d)},i(n){e||(U(r.$$.fragment,n),e=!0)},o(n){R(r.$$.fragment,n),e=!1},d(n){n&&b(l),je(r)}}}function Be(o){let t,l,r,a,e,s,u,n,h,d,f=o[2].name+"",i,_,y,C,z=[],J=new Map,V,O,L=[],K=new Map,q,I;l=new Ee({props:{link:Z+"/",title:"Back",isLarge:!0,$$slots:{default:[Fe]},$$scope:{ctx:o}}});let A=G(Object.entries(o[2]).slice(0,5));const Q=c=>c[6];for(let c=0;c<A.length;c+=1){let m=ue(o,A,c),g=Q(m);J.set(g,z[c]=fe(g,m))}let F=G(Object.entries(o[2]).slice(5));const X=c=>c[6];for(let c=0;c<F.length;c+=1){let m=ce(o,F,c),g=X(m);K.set(g,L[c]=he(g,m))}let k=o[1]&&o[1].length>0&&_e(o);return{c(){t=w("main"),de(l.$$.fragment),r=D(),a=w("section"),e=w("img"),n=D(),h=w("div"),d=w("h1"),i=M(f),_=D(),y=w("div"),C=w("ul");for(let c=0;c<z.length;c+=1)z[c].c();V=D(),O=w("ul");for(let c=0;c<L.length;c+=1)L[c].c();q=D(),k&&k.c(),this.h()},l(c){t=E(c,"MAIN",{class:!0});var m=$(t);ye(l.$$.fragment,m),r=N(m),a=E(m,"SECTION",{class:!0});var g=$(a);e=E(g,"IMG",{class:!0,src:!0,alt:!0}),n=N(g),h=E(g,"DIV",{class:!0});var j=$(h);d=E(j,"H1",{class:!0});var B=$(d);i=P(B,f),B.forEach(b),_=N(j),y=E(j,"DIV",{class:!0});var S=$(y);C=E(S,"UL",{class:!0});var x=$(C);for(let H=0;H<z.length;H+=1)z[H].l(x);x.forEach(b),V=N(S),O=E(S,"UL",{class:!0});var ee=$(O);for(let H=0;H<L.length;H+=1)L[H].l(ee);ee.forEach(b),q=N(S),k&&k.l(S),S.forEach(b),j.forEach(b),g.forEach(b),m.forEach(b),this.h()},h(){var c,m,g;v(e,"class","country-data__image svelte-d7hjpz"),le(e.src,s=(g=(m=(c=o[0])==null?void 0:c.country)==null?void 0:m.flags)==null?void 0:g.png)||v(e,"src",s),v(e,"alt",u=o[2].name+" Flag"),v(d,"class","country-data__title svelte-d7hjpz"),v(C,"class","country-details__list svelte-d7hjpz"),v(O,"class","country-details__list svelte-d7hjpz"),v(y,"class","country-details country-data__details svelte-d7hjpz"),v(h,"class","country-data__text"),v(a,"class","country-data main__country-data svelte-d7hjpz"),v(t,"class","main svelte-d7hjpz")},m(c,m){T(c,t,m),be(l,t,null),p(t,r),p(t,a),p(a,e),p(a,n),p(a,h),p(h,d),p(d,i),p(h,_),p(h,y),p(y,C);for(let g=0;g<z.length;g+=1)z[g]&&z[g].m(C,null);p(y,V),p(y,O);for(let g=0;g<L.length;g+=1)L[g]&&L[g].m(O,null);p(y,q),k&&k.m(y,null),I=!0},p(c,[m]){var j,B,S;const g={};m&4096&&(g.$$scope={dirty:m,ctx:c}),l.$set(g),(!I||m&1&&!le(e.src,s=(S=(B=(j=c[0])==null?void 0:j.country)==null?void 0:B.flags)==null?void 0:S.png))&&v(e,"src",s),(!I||m&4&&u!==(u=c[2].name+" Flag"))&&v(e,"alt",u),(!I||m&4)&&f!==(f=c[2].name+"")&&W(i,f),m&4&&(A=G(Object.entries(c[2]).slice(0,5)),z=Y(z,m,Q,1,c,A,J,C,oe,fe,null,ue)),m&4&&(F=G(Object.entries(c[2]).slice(5)),L=Y(L,m,X,1,c,F,K,O,oe,he,null,ce)),c[1]&&c[1].length>0?k?(k.p(c,m),m&2&&U(k,1)):(k=_e(c),k.c(),U(k,1),k.m(y,null)):k&&(we(),R(k,1,1,()=>{k=null}),ke())},i(c){I||(U(l.$$.fragment,c),U(k),I=!0)},o(c){R(l.$$.fragment,c),R(k),I=!1},d(c){c&&b(t),je(l);for(let m=0;m<z.length;m+=1)z[m].d();for(let m=0;m<L.length;m+=1)L[m].d();k&&k.d()}}}function He(o,t,l){let r,a,{data:e}=t;return o.$$set=s=>{"data"in s&&l(0,e=s.data)},o.$$.update=()=>{var s,u,n,h,d,f,i,_,y,C,z,J,V,O,L,K,q,I,A,Q,F,X,k,c,m,g;o.$$.dirty&1&&l(2,r=typeof((s=e==null?void 0:e.country)==null?void 0:s.name)=="string"?{name:(u=e==null?void 0:e.country)==null?void 0:u.name,"native name":(n=e==null?void 0:e.country)==null?void 0:n.nativeName,population:re((h=e==null?void 0:e.country)==null?void 0:h.population),region:(d=e==null?void 0:e.country)==null?void 0:d.region,"sub region":(f=e==null?void 0:e.country)==null?void 0:f.subregion,"top level domain":(i=e==null?void 0:e.country)==null?void 0:i.topLevelDomain[0],...((_=e==null?void 0:e.country)==null?void 0:_.capital)&&{capital:(y=e==null?void 0:e.country)==null?void 0:y.capital},...((C=e==null?void 0:e.country)==null?void 0:C.currencies)&&{currencies:Object.values((z=e==null?void 0:e.country)==null?void 0:z.currencies).map(j=>j.name).join(", ")},languages:(J=e==null?void 0:e.country)==null?void 0:J.languages.map(j=>j.name).join(", ")}:{name:(O=(V=e==null?void 0:e.country)==null?void 0:V.name)==null?void 0:O.common,"native name":Object.entries((K=(L=e==null?void 0:e.country)==null?void 0:L.name)==null?void 0:K.nativeName).map(([j,B])=>`${B.common} (${j})`).join(", "),population:re((q=e==null?void 0:e.country)==null?void 0:q.population),region:(I=e==null?void 0:e.country)==null?void 0:I.region,"sub region":(A=e==null?void 0:e.country)==null?void 0:A.subregion,capital:(Q=e==null?void 0:e.country)==null?void 0:Q.capital[0],...((F=e==null?void 0:e.country)==null?void 0:F.tld)&&{"top level domain":e==null?void 0:e.country.tld[0]},...((X=e==null?void 0:e.country)==null?void 0:X.currencies)&&{currencies:Object.values((k=e==null?void 0:e.country)==null?void 0:k.currencies).map(j=>j.name).join(", ")},...((c=e==null?void 0:e.country)==null?void 0:c.languages)&&{languages:Object.values((m=e==null?void 0:e.country)==null?void 0:m.languages).join(", ")}}),o.$$.dirty&1&&l(1,a=(e==null?void 0:e.borders)&&((g=e==null?void 0:e.borders)==null?void 0:g.map(j=>typeof(j==null?void 0:j.name)=="string"?{name:j.name,cca3:j.alpha3Code}:{name:j.name.common,cca3:j.cca3})))},[e,a,r]}class We extends ge{constructor(t){super(),ve(this,t,He,Be,pe,{data:0})}}export{We as component,Re as universal};
